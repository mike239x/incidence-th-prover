<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Math testing</title>
    <!-- math.js -->
    <script src="https://unpkg.com/mathjs@5.0.2/dist/math.min.js"></script>
    <script>

let x = math.sparse([[1],[1]]);
let b = math.sparse([[1],[1]]);
let X = math.sparse([[1,0],[1,1]]);


function math_lsolve(matrix, b) {
  let msize = matrix.size();
  console.log(`msize ${msize}`);
  let h = msize[0];
  let w = msize[1];
  let bsize = b.size();
  console.log(`bsize ${bsize}`);
  assert(bsize[0] <= h);
  assert(bsize[1] == 1);
  let re = undefined;
  // L matrix is normaly square
  if (w == h) {
    // console.log(`w == h`);
    // M is a square matrix, use the standard function
    b.resize([h,1]);
    re = math.lsolve(matrix,b);
    re.resize([w,1]);
  } else if (h > w) {
    matrix.resize([h,h]);
    b.resize([h,1]);
    re = math.lsolve(matrix,b);
    // matrix.resize([h,w]);
    // b.resize([...])
    re.resize([w,1]);
  }
  return re;
}

function assert(a) {
	if (!a) throw "AssertionError";
}

    </script> 
  </head>
  <body>
  </body>
</html>
